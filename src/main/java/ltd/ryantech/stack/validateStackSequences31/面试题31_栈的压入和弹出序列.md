# é¢è¯•é¢˜ 31 ï¼šæ ˆçš„å‹å…¥å’Œå¼¹å‡ºåºåˆ—

---

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/)

ğŸ“—difficultyï¼š	**Medium**	

ğŸ¯Tagsï¼š

+ **[æ ˆ](https://leetcode-cn.com/tag/stack/)** 
---

## 1. é¢˜ç›®æè¿°ğŸ“ƒ

è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œåºåˆ— `{1,2,3,4,5}` æ˜¯æŸæ ˆçš„å‹æ ˆåºåˆ—ï¼Œåºåˆ— `{4,5,3,2,1}` æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½† `{4,3,5,1,2}` å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚

**æ ·ä¾‹ 1 ï¼š**

```
è¾“å…¥ï¼špushed = [1,2,3,4,5], popped = [4,5,3,2,1]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š
push(1), push(2), push(3), push(4), pop() -> 4,
push(5), pop() -> 5, pop() -> 3, pop() -> 2, pop() -> 1
```



**æ ·ä¾‹ 2 ï¼š**

```
è¾“å…¥ï¼špushed = [1,2,3,4,5], popped = [4,3,5,1,2]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼š1 ä¸èƒ½åœ¨ 2 ä¹‹å‰å¼¹å‡ºã€‚
```



**æ³¨æ„ï¼š**

+ `0 <= pushed.length == popped.length <= 1000`
+ `0 <= pushed[i], popped[i] < 1000`
+ `pushed` æ˜¯ `popped` çš„æ’åˆ—ã€‚



**æ³¨æ„ï¼š**

+ æœ¬é¢˜ä¸ä¸»ç«™ 946 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/validate-stack-sequences/

---

## 2. è§£é¢˜æ€è·¯ğŸ’¡

### åå‘æ¨¡æ‹Ÿ 

ä¸‹é¢çš„æˆ‘ç¬¬ä¸€æ¬¡å†™è¿™é“é¢˜ï¼Œè‡ªå·±çš„ä¸€ä¸ªæ€è€ƒï¼Œå¤§æ¦‚è€—æ—¶ 20 åˆ†é’Ÿã€‚



é¦–å…ˆï¼Œå°† `popped` æ•°ç»„å…¥æ ˆï¼Œä»¥å¤‡æŒ‰é¡ºåºå¼¹å‡ºï¼Œæ¨¡æ‹Ÿæ ˆçš„æ“ä½œã€‚

ç„¶åå°† `pushed` ä¹Ÿæ¨¡æ‹Ÿæ ˆçš„æ“ä½œï¼Œé¦–å…ˆå°†å…ƒç´ æŒ‰åºåˆ—å…¥æ ˆã€‚ç„¶åæ¯”è¾ƒè¿™ 2 ä¸ªæ ˆçš„æ ˆé¡¶ï¼Œå¦‚æœç›¸ç­‰ï¼Œé‚£ä¹ˆå°±å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¿™è¡¨æ˜åŒ¹é…äº†ã€‚ç„¶åï¼Œç»§ç»­åˆ¤æ–­ï¼Œç›´åˆ° â‘ `pushed`ä¸ºç©º æˆ–è€… â‘¡æ ˆé¡¶å…ƒç´ ä¸ç›¸ç­‰çš„æƒ…å†µã€‚

å½“ `pushed` æ•°ç»„éå†å®Œæˆï¼Œå¼€å§‹å¤„ç†å‰©ä½™çš„æ ˆä¸­çš„å…ƒç´ ã€‚

+ å¦‚æœæ ˆé¡¶å…ƒç´ ç›¸ç­‰ï¼Œé‚£ä¹ˆåŒæ—¶ 2 ä¸ªæ ˆåŒæ—¶å¼¹å‡ºæ ˆé¡¶å…ƒç´ ã€‚
+ å¦‚æœæ ˆé¡¶å…ƒç´ ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆä»…ä»…å¼¹å‡º `popped` æ ˆçš„æ ˆé¡¶å…ƒç´ ã€‚
+ å¦‚æœ `popped` å·²ç»ç©ºï¼Œå¤„ç†å®Œæˆï¼Œ`pushed` è¿˜æ²¡æœ‰ç©ºï¼Œè¯´æ˜ä¸åŒ¹é…ï¼›å¦åˆ™åŒ¹é…æˆåŠŸã€‚



**æ³¨æ„ï¼š**

`Java` ä¸­å»ºè®®ä½¿ç”¨ `Deque` å’Œ `LinkedList` å®ç° `Stack` çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `Stack` ç±»ã€‚



#### ä»£ç å®ç°

```java
public boolean validateStackSequences(int[] pushed, int[] popped) {
    Deque<Integer> pushedStack = new LinkedList<>();
    Deque<Integer> poppedStack = new LinkedList<>();
    for (int i = 0; i < popped.length; i++) {
        poppedStack.offerLast(popped[i]);
    }
    int idx = 0;
    // é¢˜ç›®ç»™å®šäº† pushed.length == popped.length
    while (idx < pushed.length) {
        pushedStack.offerFirst(pushed[idx]);
        idx++;
        while (!pushedStack.isEmpty() && pushedStack.peekFirst().equals(poppedStack.peekFirst())) {
            pushedStack.pollFirst();
            poppedStack.pollFirst();
        }
    }
    while (!poppedStack.isEmpty()) {
        if (poppedStack.peekFirst().equals(pushedStack.peekFirst())) {
            poppedStack.pollFirst();
            pushedStack.pollFirst();
        } else {
            poppedStack.pollFirst();
        }
    }
    return pushedStack.isEmpty();
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(2 n)` ã€‚éœ€è¦ 2 ä¸ªè¾…åŠ©æ ˆã€‚



> ä»¥ä¸‹ä»£ç æ¥è‡ª [leetcode-cn ç”¨æˆ· Krahets çš„é¢˜è§£](https://leetcode-cn.com/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/solution/mian-shi-ti-31-zhan-de-ya-ru-dan-chu-xu-lie-mo-n-2/)ï¼Œæ„Ÿè°¢ä»–çš„ç²¾å½©è®²è§£ã€‚

### æ¨¡æ‹Ÿä»£ç çš„ä¼˜åŒ–

ä¼˜åŒ–çš„ä»£ç ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©æ ˆï¼Œå¯¹äº popped æ•°ç»„çš„å¤„ç†ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆå³å¯ã€‚

![å›¾ç¤ºæ€è·¯](https://assets.ryantech.ltd/20200617153758.png)



#### ä»£ç å®ç°

```java
// ä¼˜åŒ–ç®—æ³•
public boolean validateStackSequences(int[] pushed, int[] popped) {
    Deque<Integer> stack = new LinkedList<>();
    int idx = 0;
    for (int num : pushed) {
        stack.offerFirst(num);
        while (!stack.isEmpty() && stack.peekFirst() == popped[idx]) {
            stack.pollFirst();
            idx++;
        }
    }
    return stack.isEmpty();
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚éœ€è¦ 1 ä¸ªè¾…åŠ©æ ˆ å’Œ å‡ ä¸ªæŒ‡é’ˆã€‚

---

## 3. æ€»ç»“ğŸ¯

### ç›¸ä¼¼é¢˜ç›®

[é¢è¯•é¢˜30. åŒ…å«minå‡½æ•°çš„æ ˆ](https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof/)

> è™½ç„¶å¯ä»¥ä½¿ç”¨å†…å»ºçš„ç±»å®ç°ï¼Œä½†æ˜¯é¢è¯•å®˜æ›´åŠ å¸Œæœ›é¢è¯•è€…è‡ªå·±æ‰‹å†™ä¸€ä¸ªæ ˆã€‚
>
> å¯ä»¥é€‰æ‹©ä½¿ç”¨æ•°ç»„å®ç°ï¼Œä¹Ÿå¯ä»¥é€‰æ‹© é“¾è¡¨å®ç°æ ˆã€‚
>
> ä½¿ç”¨æ•°ç»„ï¼Œéœ€è¦è€ƒè™‘æ ˆçš„æ‰©å®¹æ“ä½œï¼›ä½¿ç”¨é“¾è¡¨çš„è¯ï¼Œé€‰æ‹©å•é“¾è¡¨ï¼Œéœ€è¦ä¸€ç‚¹ç‚¹çš„å°æŠ€å·§ã€‚
>
> è¯·åœ¨æœ¬é¢˜å°è¯•ä½¿ç”¨ è‡ªå·±æ‰‹å†™ çš„æ–¹æ³•ï¼Œå®Œæˆ é¢è¯•é¢˜ 30ã€‚

