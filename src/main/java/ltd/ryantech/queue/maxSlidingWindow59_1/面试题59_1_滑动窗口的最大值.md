# é¢è¯•é¢˜ 59_1 ï¼šæ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼

---

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof/)

ğŸ“—difficultyï¼š	**Medium**	

ğŸ¯Tagsï¼š

+ **[é˜Ÿåˆ—](https://leetcode-cn.com/tag/queue/)**
---

## 1. é¢˜ç›®æè¿°ğŸ“ƒ

ç»™å®šä¸€ä¸ªæ•°ç»„ `nums` å’Œæ»‘åŠ¨çª—å£çš„å¤§å° `k`ï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚

**æ ·ä¾‹ 1 ï¼š**

```
è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3
è¾“å‡º: [3,3,5,5,6,7] 
è§£é‡Š: 

  æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```



**æç¤ºï¼š**

+ ä½ å¯ä»¥å‡è®¾ `k` æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨è¾“å…¥æ•°ç»„ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œ`1 â‰¤ k â‰¤ è¾“å…¥æ•°ç»„çš„å¤§å°`ã€‚

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 239 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/sliding-window-maximum/

---

## 2. è§£é¢˜æ€è·¯ğŸ’¡

> ä»¥ä¸‹é¢˜è§£æ¥è‡ªäº [leetcode-cn ç”¨æˆ· Krahets çš„é¢˜è§£](https://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof/solution/mian-shi-ti-59-i-hua-dong-chuang-kou-de-zui-da-1-6/)ï¼Œæ„Ÿè°¢ä»–çš„æŒç»­ç²¾å½©åˆ†æã€‚

### åŒç«¯é˜Ÿåˆ— å®ç° â€œå•è°ƒé˜Ÿåˆ—â€

ä¸€ä¸ªå¤§å°ä¸º `K` çš„æ»‘åŠ¨çª—å£ï¼Œå‘å³æ»‘åŠ¨ï¼Œå‰é¢çš„å…ƒç´ æ»‘å‡ºï¼Œåé¢çš„å…ƒç´ æ»‘å…¥ã€‚åŒç«¯é˜Ÿåˆ—çš„ç‰¹å¾å·²ç»å‡ºæ¥äº†ã€‚

æœ¬é¢˜éœ€è¦æ±‚è§£çš„æ˜¯çª—å£ä¸­çš„æœ€å¤§å€¼ï¼Œå¦‚æœæ˜¯å¯¹æ¯ä¸ªçª—å£æ±‚ä¸€æ¬¡æœ€å¤§å€¼ï¼Œåœ¨æ²¡æœ‰ç‰¹æ®Šå¤„ç†é˜Ÿåˆ—çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªå¤æ‚åº¦ä¼šè¾¾åˆ° `O(n * K)` çº§åˆ«ï¼Œå¦‚æœèƒ½å¤Ÿåœ¨ `O(1)` å†…å®Œæˆè·å–æœ€å¤§å€¼çš„å·¥ä½œï¼Œé‚£ä¹ˆå¯ä»¥å°†å¤æ‚åº¦ä¸‹é™åˆ° `O(n)` ã€‚

å¦‚æœé˜Ÿåˆ—æ˜¯â€œå•è°ƒçš„â€,åªè¦ä¿è¯é˜Ÿåˆ—å¤´éƒ¨ ï¼ˆor å°¾éƒ¨çš„å€¼ï¼‰ä¸ºæœ€å¤§å€¼ï¼Œå–å‡ºæ”¹å…ƒç´ å³å¯ã€‚

æœ‰ç‚¹ç±»ä¼¼ä¸ [å‰‘æŒ‡ Offer 30. åŒ…å«minå‡½æ•°çš„æ ˆ](https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof/) ï¼Œéœ€è¦å¯¹å½“å‰å…ƒç´ æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ”¹å…ƒç´ ä»¥åŠè¢«æ»‘å‡º æ»‘åŠ¨çª—å£äº†ï¼Œç›¸åº”åœ°è¦ä»å•è°ƒé˜Ÿåˆ— ä¸­å‡ºé˜Ÿã€‚



![è¯¦ç»†å›¾è§£](https://assets.ryantech.ltd/20200623202854.jpg)

å¯ä»¥æœ‰ 2 ä¸ªå¾ªç¯ï¼Œåˆ†ä¸º æ»‘åŠ¨çª—å£å½¢æˆå‰ï¼Œå’Œæ»‘åŠ¨çª—å£å½¢æˆåã€‚å½“ä¸€ä¸ªæ»‘åŠ¨çª—å£å½¢æˆäº†ï¼Œæ­¤æ—¶ï¼Œå°±äº§ç”Ÿäº†ç¬¬ä¸€ä¸ªéœ€è¦åŠ å…¥æœ€ç»ˆ `res[]` æ•°ç»„çš„å…ƒç´ ï¼Œå…¶ä½ç½®åœ¨ `deque.peekFirst()`ã€‚



#### ä»£ç å®ç°

```java
public int[] maxSlidingWindow(int[] nums, int k) {
    if (nums == null || nums.length == 0 || k <= 0) {
        return new int[0];
    }

    int[] maxInWindows = new int[nums.length - k + 1];
    // slideWindow å­˜å‚¨çš„æ˜¯ éä¸¥æ ¼é€’å‡ çš„åºåˆ—
    Deque<Integer> slideWindow = new LinkedList<>();

    // åˆæ­¥å»ºç«‹æ»‘åŠ¨çª—å£
    for (int i = 0; i < k; i++) {
        // slideWindow ä¸ä¸ºç©º ä¸” çª—å£æœ€å³è¾¹çš„æ•°å­— nums[i] æ¯”å®ƒå‰é¢çš„æ•°å­—éƒ½è¦å¤§çš„è¯ï¼Œå°±ä¾æ¬¡ä»é˜Ÿå°¾åˆ é™¤å…ƒç´ 
        // ä¿è¯äº†é˜Ÿåˆ—çš„å¤´éƒ¨å…ƒç´ æœ€å¤§
        while (!slideWindow.isEmpty() && nums[i] > slideWindow.peekLast()) {
            slideWindow.pollLast();
        }
        // å°† nums[i] å­˜å…¥é˜Ÿåˆ—ä¸­
        // æ­¤æ—¶ï¼Œé˜Ÿåˆ— slideWindow ä¸­å…ƒç´ æ˜¯éä¸¥æ ¼é€’å‡çš„
        // é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ å€¼æœ€å¤§
        slideWindow.offerLast(nums[i]);
    }
    // å¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£å»ºç«‹å®Œæˆï¼Œç»§ç»­å¤„ç†
    // çª—å£çš„æœ€å¤§å€¼å­˜å…¥æœ€ç»ˆçš„æ•°ç»„
    maxInWindows[0] = slideWindow.peekFirst();

    for (int i = k; i < nums.length; i++) {
        // å¦‚æœé˜Ÿåˆ—å¤´éƒ¨çš„æ•°å­—å·²ç»ä»å…¶ä¸­æ»‘å‡ºï¼Œé‚£ä¹ˆæ»‘å‡ºçš„æ•°å­—ä¹Ÿéœ€è¦ä»é˜Ÿåˆ—çš„å¤´éƒ¨åˆ é™¤
        // ä¾‹å¦‚ nums.length = 8,k = 3 çš„æƒ…å†µã€‚for å¾ªç¯ç¬¬ä¸€è½®ï¼Œå¦‚æœå½“å‰æœ€å¤§å€¼ä¸º nums[0] éœ€è¦åˆ é™¤å®ƒï¼Œå› ä¸ºå·²ç»æ»‘è¿‡å»äº†
        if (!slideWindow.isEmpty() && slideWindow.peekFirst() == nums[i - k]) {
            slideWindow.pollFirst();
        }
        // è¿™é‡Œçš„åˆ¤æ–­æ˜¯ä¸¥æ ¼å¤§äºï¼Œå¦‚æœä¸æ˜¯ä¸¥æ ¼åˆ¤æ–­ï¼Œä¼šé€ æˆæ•°æ®è¯¯åˆ é™¤
        // å› ä¸ºä¸Šé¢å¯¹å…ƒç´ æ˜¯å¦å‡ºé˜Ÿè¿›è¡Œäº†åˆ¤æ–­
        while (!slideWindow.isEmpty() && nums[i] > slideWindow.peekLast()) {
            slideWindow.pollLast();
        }
        slideWindow.offerLast(nums[i]);
        maxInWindows[i - k + 1] = slideWindow.peekFirst();
    }
    return maxInWindows;
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚`nums` æ•°ç»„æ¯ä¸ªå…ƒç´ è®¿é—®ä¸€æ¬¡ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(k)` ã€‚ä¸è€ƒè™‘æœ€ç»ˆè¿”å›æ•°ç»„éœ€è¦çš„ç©ºé—´ã€‚å­˜å‚¨æ»‘åŠ¨æ•°ç»„æœ€å¤§éœ€è¦ `O(k)` çº§åˆ«çš„ç©ºé—´ã€‚



---

## 3. æ€»ç»“ğŸ¯

### ç›¸ä¼¼é¢˜ç›®

[å‰‘æŒ‡ Offer 30. åŒ…å«minå‡½æ•°çš„æ ˆ](https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof/)

