# é¢è¯•é¢˜ 3 ï¼šæ•°ç»„ä¸­é‡å¤çš„æ•°å­—

---

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/)

ğŸ“—difficultyï¼š**Easy**

ğŸ¯Tagsï¼š

+ **[å“ˆå¸Œè¡¨](https://leetcode-cn.com/tag/hash-table/)** 
+ **[æ•°ç»„](https://leetcode-cn.com/tag/array/)**

---

## 1. é¢˜ç›®æè¿°ğŸ“ƒ

 é¢˜ç›®ä¸€

åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„é‡Œçš„æ‰€æœ‰éƒ½åœ¨ `0 ~ n - 1` çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥é•¿åº¦ä¸º 7 çš„æ•°ç»„`{2,3,1,0,2,5,3}` ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯é‡å¤çš„æ•°å­— 2 æˆ–è€… 3ã€‚

## 2. è§£é¢˜æ€è·¯ğŸ’¡

#### æ’åºæ³•

ç®€å•ç›´æ¥ã€‚

æ—¶é—´å¤æ‚åº¦ä¸ºï¼š$O(nlogn)$

```java
public int findRepeatNumber(int[] nums) {
    if (nums == null || nums.length == 0) {
        return -1;
    }

    for (int num : nums) {
        if (num < 0 || num > nums.length - 1) {
            return -1;
        }
    }

    Arrays.sort(nums);
    for (int i = 0; i < nums.length - 1; i++) {
        if (nums[i] == nums[i + 1]) {
            return nums[i];
        }
    }
    return -1;
}
```



##### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n log n)` ã€‚å¿«é€Ÿæ’åºçš„å¤æ‚åº¦ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)` ã€‚

---

#### å“ˆå¸Œè¡¨æ³•

```java
// å“ˆå¸Œè¡¨æ³•
public int findRepeatNumber(int[] nums) {
    if (nums == null || nums.length == 0) {
        return -1;
    }

    for (int i : nums) {
        if (i < 0 || i > nums.length - 1) {
            return -1;
        }
    }

    Set<Integer> set = new HashSet<>();
    for (int i : nums) {
        if (set.contains(i)) {
            return i;
        }
        set.add(i);
    }
    return -1;
}
```

##### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚æœ€åæƒ…å†µä¸‹ï¼Œé‡å¤çš„æ•°å­—å‡ºç°åœ¨æœ€å `2` ä½ï¼Œéœ€è¦éå†æ•´ä¸ªæ•°ç»„ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚æœ€åæƒ…å†µä¸‹ï¼Œé‡å¤çš„æ•°å­—å‡ºç°åœ¨æœ€å `2` ä½ï¼Œéœ€è¦å­˜å‚¨æ•´ä¸ªæ•°ç»„ã€‚

---

#### äº¤æ¢æ³•

```java
public int findRepeatNumber(int[] nums) {
    if (nums == null || nums.length == 0) {
        return -1;
    }

    for (int num : nums) {
        if (num < 0 || num > nums.length - 1) {
            return -1;
        }
    }

    int t;
    // äº¤æ¢æ³•ï¼ŒæœŸæœ›ä½¿å¾—æ¯ä¸€ä¸ªå…ƒç´ è½åœ¨å…¶ index çš„ä½ç½®ä¸Š
    for (int i = 0; i < nums.length; i++) {
        while (i != nums[i]) {
            if (nums[i] == nums[nums[i]]) {
                return nums[i];
            }
            t = nums[i];
            nums[i] = nums[t];
            nums[t] = t;
        }
    }
    return -1;
}
```

å¯¹äºä¾‹å­ï¼š`{2,3,1,0,2,5,3}` ã€‚æŒ‰ç…§ä¸Šè¿°çš„ç®—æ³•è¿›è¡Œåˆ†æï¼š

+ ç»•è¿‡ç‰¹åˆ¤ã€‚

+ `i = 0` æ—¶ï¼Œ`0 == nums[0]` ä¸æˆç«‹ï¼Œä¸”ç¬¬ `0` ä¸ªæ•°å­—ä¸ç­‰äºç¬¬ `2` ä¸ªä½ç½®ä¸Šçš„æ•°å­—ã€‚äº¤æ¢æ³•ï¼Œæ•°ç»„å˜ä¸º `{1,3,2,0,2,5,3}`
    + ç¬¬ 0 ä¸ªæ•°å­—ä¸ä¸º 0 ï¼Œç»§ç»­äº¤æ¢å’Œåˆ¤æ–­ã€‚æ•°ç»„å˜ä¸º ` {3,1,2,0,2,5,3}` 
    + ç¬¬ 0 ä¸ªæ•°å­—ä¸ä¸º 0 ï¼Œç»§ç»­äº¤æ¢å’Œåˆ¤æ–­ï¼Œæ•°ç»„å˜ä¸º`{0,1,2,3,2,5,3}`
    + ç¬¬ 0 ä¸ªæ•°å­—ä¸º 0ï¼Œç»“æŸç¬¬ i ä¸ªæ•°å­—çš„äº¤æ¢æ“ä½œã€‚ï¼ˆä¸€å…±äº¤æ¢äº† 2 æ¬¡ã€‚ï¼‰
+ åé¢çš„ `{1,2,3}` ä½ç½®æ­£ç¡®ï¼Œæ— éœ€äº¤æ¢æ“ä½œã€‚
+ `i = 4` æ—¶ï¼Œ`4` ä¸ç­‰äº `nums[4]`ï¼Œ`nums[4]` ç­‰äº `2`ï¼Œ`nums[2]` ç­‰äº `2`ï¼Œå³ `nums[i] == nums[[nums[i]]]` æˆç«‹ï¼Œå³å‡ºç°äº†é‡å¤çš„æ•°å­—ï¼Œè¿”å›è¯¥æ•°å­—ã€‚

##### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦
    + è™½ç„¶æœ‰ 2 é‡å¾ªç¯ï¼Œä½†æ˜¯æœ‰ä¸ªå¾ˆå·§çš„è§„å¾‹ï¼Œæ¯ä¸ªæ•°æ‰¾åˆ°å…¶å¯¹åº”çš„ä½ç½®ï¼Œæœ€å¤šåªéœ€è¦ 2 æ¬¡ã€‚å¦‚æœä¸€ä¸ªæ•°å­—æ˜¯ä¸é‡å¤çš„ï¼Œé‚£ä¹ˆäº¤æ¢ 2 æ¬¡åå°±ä¼šå½’ä½ï¼Œå¦åˆ™å°±ä¼šå‡ºç°é‡å¤ï¼Œè¿”å›æ”¹æ•°å­—å³å¯ã€‚
    + å³å¤æ‚åº¦ä¸º `O(n)`
+ ç©ºé—´å¤æ‚åº¦
    + `O(1)`

---

## 3. æ€»ç»“ğŸ¯

é€æ­¥æ‰“å¼€æ€è·¯ï¼Œæé«˜ç®—æ³•çš„å¤æ‚åº¦è¡¨ç°ã€‚

### ç›¸ä¼¼é¢˜ç›®æ‹“å±•

> ä¸ä¿®æ”¹æ•°ç»„æ‰¾å‡ºé‡å¤çš„æ•°å­—ã€‚
>
> åœ¨ä¸€ä¸ªé•¿åº¦ `n + 1` çš„æ•°ç»„é‡Œçš„æ‰€æœ‰éƒ½åœ¨ `1 ~ n` çš„èŒƒå›´å†…ï¼Œæ‰€ä»¥æ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—æ˜¯é‡å¤çš„ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œä½†ä¸èƒ½ä¿®æ”¹è¾“å…¥çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼šå¦‚æœè¾“å…¥çš„é•¿åº¦ä¸º 8 çš„æ•°ç»„ `{2,3,5,4,3,2,6,7}`ï¼Œé‚£ä¹ˆè¾“å‡ºçš„é‡å¤æ•°å­—åº”è¯¥æ˜¯ `2` æˆ–è€… `3` ã€‚

#### å“ˆå¸Œè¡¨æ³•

```java
// å“ˆå¸Œè¡¨æ³•
public int findRepeatNumber(int[] nums) {
    if (nums == null || nums.length == 0) {
        return -1;
    }

    for (int i : nums) {
        if (i < 1 || i > nums.length) {
            return -1;
        }
    }

    Set<Integer> set = new HashSet<>();
    for (int i : nums) {
        if (set.contains(i)) {
            return i;
        }
        set.add(i);
    }
    return -1;
}
```

##### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚æœ€åæƒ…å†µä¸‹ï¼Œé‡å¤çš„æ•°å­—å‡ºç°åœ¨æœ€å `2` ä½ï¼Œéœ€è¦éå†æ•´ä¸ªæ•°ç»„ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚æœ€åæƒ…å†µä¸‹ï¼Œé‡å¤çš„æ•°å­—å‡ºç°åœ¨æœ€å `2` ä½ï¼Œéœ€è¦å­˜å‚¨æ•´ä¸ªæ•°ç»„ã€‚

---

#### äºŒåˆ†è®¡æ•°æ³•

![ä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´](https://assets.ryantech.ltd/20200825110923.png)

ç±»ä¼¼ äºŒåˆ†æŸ¥æ‰¾æ³• çš„æ€è·¯ï¼Œå°†ç»™å®šçš„æ•°ç»„è¿›è¡Œåˆ†ç‰‡åï¼Œè®¡ç®—æ˜¯å¦å‡ºç°äº†é‡å¤çš„æ•°å­—ã€‚

å……åˆ†åˆ©ç”¨äº†é¢˜ç›®ä¸­ç»™å®šçš„æ•°ç»„çš„ç‰¹æ€§ã€‚

```java
public int getDuplication(int[] nums) {
    if (nums == null || nums.length == 0) {
        return -1;
    }
    int start = 1;
    int end = nums.length - 1;
    while (end >= start) {
        int mid = ((end - start) >> 1) + start;
        int count = countRange(nums, start, mid);
        if (end == start) {
            if (count > 1) {
                return start;
            } else {
                break;
            }
        }

        if (count > (mid - start + 1)) {
            end = mid;
        } else {
            start = mid + 1;
        }
    }
    return -1;
}

private int countRange(int[] nums, int start, int end) {
    if (nums == null) {
        return 0;
    }
    int count = 0;
    for (int num : nums) {
        if (num >= start && num <= end) {
            count++;
        }
    }
    return count;
}
```

##### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n log n)` ã€‚ä¸¤åˆ†çš„å¤æ‚åº¦æ˜¯ `log n` ï¼Œè€Œè°ƒç”¨ `countRange` çš„å¤æ‚åº¦æ˜¯ `n` ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)` ã€‚

---

### [448. æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—](https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/)

é¢˜ç›®ç»™å‡ºçš„æ•°æ®èŒƒå›´å’Œä¸Šé¢ç»™å®šçš„ä¸€è‡´ï¼Œä½†æ˜¯å…è®¸è¿›è¡Œæ•°ç»„çš„ä¿®æ”¹ï¼Œå¹¶ä¸”ï¼Œéœ€è¦è¾“å‡ºå…¨éƒ¨çš„â€œæ¶ˆå¤±â€çš„æ•°å­—æ¥ã€‚

å¹¶ä¸”éœ€è¦æ»¡è¶³æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±åªèƒ½ä»æ•°å­—çš„èŒƒå›´å‡ºå‘ï¼Œä»ä¸‹æ ‡ä¸Šåšæ–‡ç« ã€‚

å°†å‡ºç°çš„å…ƒç´ å¯¹åº”çš„ä¸‹æ ‡ä½ç½®ï¼Œèµ‹å€¼ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆå¯¹äºæ¶ˆå¤±çš„æ•°å­—ï¼Œå…¶å¯¹åº”çš„ä½ç½®å§‹ç»ˆä¸ºæ­£æ•°ã€‚

```java
public List<Integer> findDisappearedNumbers(int[] nums) {
    if (nums == null || nums.length == 0) {
        return new LinkedList<>();
    }

    List<Integer> res = new ArrayList<>();
    for (int i = 0; i < nums.length; i++) {
        // æ³¨æ„è¿™é‡Œçš„ abs ï¼Œé¿å…å‡ºç°è®¿é—®è¶Šç•Œçš„æƒ…å†µ
        if (nums[Math.abs(nums[i]) - 1] > 0) {
            nums[Math.abs(nums[i]) - 1] *= -1;
        }
    }

    for (int i = 0; i < nums.length; i++) {
        if (nums[i] > 0) {
            res.add(i + 1);
        }
    }

    return res;
}
```

 åœ¨ä¸è€ƒè™‘è¾“å‡ºæ•°ç»„å ç”¨çš„æƒ…å†µä¸‹ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ï¼Œéå† 2 æ¬¡æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)` ã€‚

---

### [442. æ•°ç»„ä¸­é‡å¤çš„æ•°æ®](https://leetcode-cn.com/problems/find-all-duplicates-in-an-array/)

è¿™ä¸€é“é¢˜ç›®å’Œ 488 æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¸å®Œå…¨ä¸€è‡´ã€‚

è¿™ä¸€é“é¢˜ç›®ç»™å®šçš„æ•°å­—çš„è§„å¾‹æ›´åŠ çš„â€œç»†è‡´â€ï¼Œæœ‰çš„æ•°å­—å‡ºç° `1` æ¬¡ï¼Œæœ‰çš„æ•°å­—å‡ºç° `2` æ¬¡ã€‚

å¦‚æœä¸€ä¸ªæ•°å­—å‡ºç° `2`  æ¬¡ï¼Œé‚£ä¹ˆå åŠ  `2 * n` åï¼Œå…¶å¤§å°å¿…å®šè¶…è¿‡ `2 * n`ï¼Œæ·»åŠ åˆ°æœ€ç»ˆç»“æœå³å¯ã€‚

```java
public List<Integer> findDuplicates(int[] nums) {
    if (nums == null || nums.length == 0) {
        return new ArrayList<>();
    }

    // å¦‚æœä¸€ä¸ªæ•°å­—å‡ºç°äº† 2 æ¬¡ï¼Œé‚£ä¹ˆä¼šåŠ ä¸Š 2nï¼Œæœ€åçš„æ•°å€¼å¤§äº 2n
    List<Integer> res = new ArrayList<>();
    for (int i = 0; i < nums.length; i++) {
        int index = (nums[i] - 1) % nums.length;
        nums[index] += nums.length;
    }

    for (int i = 0; i < nums.length; i++) {
        if (nums[i] > 2 * nums.length) {
            res.add(i + 1);
        }
    }
    return res;
}
```

 åœ¨ä¸è€ƒè™‘è¾“å‡ºæ•°ç»„å ç”¨çš„æƒ…å†µä¸‹ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ï¼Œéå† 2 æ¬¡æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)` ã€‚

---

### [41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode-cn.com/problems/first-missing-positive/)

å‚è€ƒæœ¬é¢˜ï¼Œä¸æ–­åœ°è¿›è¡Œäº¤æ¢ï¼Œè®© `nums[i]` å»åˆ°å¯¹åº”çš„ä¸‹æ ‡çš„ä½ç½®ã€‚åŒæ—¶ï¼Œå¯¹ `nums[i]` èŒƒå›´è¿›è¡Œé™å®šï¼Œæ•°ç»„çš„ä¸‹æ ‡å¤©ç„¶æœ‰åºä»å°åˆ°å¤§ï¼Œå½“å®Œæˆå…¨éƒ¨å…ƒç´ çš„äº¤æ¢åï¼Œå†éå†ä¸€æ¬¡ï¼Œç¬¬ä¸€ä¸ªéæŒ‡å®šä½ç½®çš„å°±æ˜¯ç¼ºå¤±æ‰çš„ç¬¬ä¸€ä¸ªæ­£æ•°ã€‚



```java
public int firstMissingPositive(int[] nums) {
    int len = nums.length;

    for (int i = 0; i < len; i++) {
        while (nums[i] >= 1 && nums[i] <= len && nums[nums[i] - 1] != nums[i]) {
            swap(nums, i, nums[i] - 1);
        }
    }

    for (int i = 0;i < len;i++) {
        if (nums[i] != i + 1) {
            return i + 1;
        }
    }

    return len + 1;
}

private void swap(int[] nums, int i, int k) {
    int t = nums[i];
    nums[i] = nums[k];
    nums[k] = t;
}
```



---

### æœ¬é¢˜è€ƒç‚¹

+ è€ƒå¯Ÿåº”è˜è€…å¯¹ä¸€ç»´æ•°ç»„çš„ç†è§£åŠç¼–ç¨‹èƒ½åŠ›ã€‚ä¸€ç»´æ•°ç»„åœ¨å†…å­˜ä¸­å æ®è¿ç»­ç©ºé—´ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸‹æ ‡å®šä½å¯¹åº”çš„å…ƒç´ ã€‚
+ è€ƒå¯Ÿåº”è˜è€…å¯¹äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„ç†è§£ï¼Œå¹¶ä¸”èƒ½å¿«é€Ÿä¸”æ­£ç¡®åœ°å®ç°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„ä»£ç ã€‚
+ è€ƒå¯Ÿåº”è˜è€…çš„æ²Ÿé€šèƒ½åŠ›ã€‚åº”è˜è€…éœ€è¦å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›ï¼Œæ–¹æ‰å¯ä»¥äº†è§£é¢è¯•å®˜çš„éœ€æ±‚ï¼Œä»è€Œæœ‰é’ˆå¯¹æ€§åœ°é€‰æ‹©ç®—æ³•è§£å†³é—®é¢˜ã€‚

